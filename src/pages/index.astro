---
import BaseLayout from '../layouts/BaseLayout.astro'
import { loadAndFormatCollection } from 'src/util/collection'
import Tile from 'src/components/Tile.astro'
import { theme } from 'src/Theme.css'
import GigTile from 'src/components/gig/GigTile.astro'
import FlexGridContainer from 'src/components/FlexGridContainer'

const gigs = await loadAndFormatCollection('gig')
const blogs = await loadAndFormatCollection('blog')
---

<BaseLayout>
	<FlexGridContainer xs={12} sm={6} md={6} lg={6}>
		<FlexGridContainer xs={6} sm={4} md={4} lg={4}>
			{gigs.slice(0, 8).map((gig) => <GigTile gig={gig} />)}
		</FlexGridContainer>
		<FlexGridContainer xs={6} sm={4} md={4} lg={4}>
			{blogs.slice(0, 8).map((blog) => <Tile title={blog.entry.data.title} href={blog.extra.absolutePath} />)}
		</FlexGridContainer>
	</FlexGridContainer>
	<FlexGridContainer xs={6} sm={6} md={6} lg={6}>
		<Tile containerHeight={theme.dimensions.headerHeightWithSubheader} href="/gigs" backgroundColor={theme.color.foreground}>
			More Gigs
		</Tile>
		<Tile containerHeight={theme.dimensions.headerHeightWithSubheader} href="/blog" backgroundColor={theme.color.secondary}>
			More Articles
		</Tile>
	</FlexGridContainer>
</BaseLayout>

<style>
	.featured-gig {
		grid-column: span 12;
	}
	.two-side-gigs {
		grid-column: span 12;
	}
	.everything-else {
		grid-column: span 12;
	}
	@media (--md) {
		.featured-gig {
			grid-column: span 8;
		}
		.two-side-gigs {
			grid-column: span 4;
		}
		.everything-else {
			grid-column: span 12;
		}
	}
</style>
