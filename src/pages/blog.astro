---
import BaseLayout from '../layouts/BaseLayout.astro'
import { loadAndFormatCollection } from 'src/util/collection'
import Banner from 'src/components/Banner.astro'
import TextContainer from 'src/components/TextContainer.astro'

const blogs = await loadAndFormatCollection('blog')
---

<BaseLayout>
	<TextContainer>
		{
			blogs.map((blog) => (
				<div>
					<h2>
						<a href={blog.extra.absolutePath}>
							{blog.entry.data.tags.includes('interview') && 'INTERVIEW: '}
							{blog.entry.data.title}
						</a>
					</h2>
					<h4>{blog.entry.data.date.toLocaleDateString()}</h4>
					{blog.extra.cover && (
						<a href={blog.extra.absolutePath}>
							<Banner height="20vh" backgroundImage={blog.extra.cover} />
						</a>
					)}
					<p>
						{blog.entry.data.description}
						<small>
							<a href={blog.extra.absolutePath}>More</a>
						</small>
					</p>
					<hr />
				</div>
			))
		}
	</TextContainer>
</BaseLayout>
