---
import BackgroundImage from './BackgroundImage.astro'
import type { ResponsiveImage } from 'src/util/ResponsiveImage'
import type { ResponsiveImageSizes } from 'src/components/Image2.astro'
import {
	tileWrapper,
	tileInner,
	titleWrapper,
	tileContent,
	tileTitle,
	tileLabel,
	background,
	height,
	width,
	tileSubtitle
} from './Tile.css'
import { assignInlineVars } from '@vanilla-extract/dynamic'

interface Props {
	href: string
	className?: string
	id?: string
	responsiveImage?: ResponsiveImage
	title?: string
	label?: string
	subtitle?: string
	backgroundColor?: string
	containerHeight?: string
	containerWidth?: string
	dataAttributes?: any
	responsiveImageSizes?: keyof ResponsiveImageSizes
}

const {
	href,
	className,
	id,
	responsiveImage,
	title,
	subtitle,
	label,
	backgroundColor,
	containerHeight,
	containerWidth,
	dataAttributes,
	responsiveImageSizes
} = Astro.props
---

<div
	{...dataAttributes}
	class={`${tileWrapper[containerWidth ? 'fixedWidth' : 'noWidth']} ${className || ''} tile`}
	style={assignInlineVars({
		[height]: containerHeight
	})}
	id={id}
>
	<div
		class={tileInner}
		style={assignInlineVars({
			[background]: backgroundColor,
			[height]: containerHeight,
			[width]: containerWidth
		})}
	>
		<a href={href} title={title} style={{ height: '100%', display: 'block' }}>
			{
				responsiveImage && (
					<BackgroundImage responsiveImageSizes={responsiveImageSizes} responsiveImage={responsiveImage} />
				)
			}
			<div class={titleWrapper}>
				<div class={tileContent}>
					{label && <span class={tileLabel}>{label}</span>}
					{title && <h3 class={tileTitle}>{title}</h3>}
					{subtitle && <h5 class={tileSubtitle}>{subtitle}</h5>}
					<div style={{ marginTop: 'auto' }}>
						<slot />
					</div>
				</div>
			</div>
		</a>
	</div>
</div>
